<!--
  Generated template for the Reserve page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Reserve</ion-title>
  </ion-navbar>

</ion-header>


<ion-content class="outer-content">

<ion-refresher (ionRefresh)="doRefresh($event)">
  <ion-refresher-content></ion-refresher-content>
</ion-refresher>

<ion-list>
  <ion-item>
    <ion-label>Select Date</ion-label>
    <ion-datetime displayFormat="DDD MMM DD YYYY" [(ngModel)]="selectDate.month" min={{minDate}} max={{maxDate}}></ion-datetime>
  </ion-item>
</ion-list>

<ion-list>
  <ion-list-header>
    Avaliablity
  </ion-list-header>

  <ion-slides pager style="background: white">

    <ion-slide *ngFor="let p of slidePages">
      <ion-grid>
        <ion-row>
          <ion-col col-3 ></ion-col>
          <ion-col col-2 class="timecell">{{p.startHour}}-{{p.startHour + 1}}</ion-col>
          <ion-col col-2 class="timecell">{{p.startHour + 1}}-{{p.startHour + 2}}</ion-col>
          <ion-col col-2 class="timecell">{{p.startHour + 2}}-{{p.startHour + 3}}</ion-col>
          <ion-col col-2 class="timecell">{{p.startHour + 3}}-{{p.startHour + 4}}</ion-col>
        </ion-row>
        <ion-row *ngFor="let r of p.rooms">
          <ion-col col-3>{{r.name}}</ion-col>
          <ion-col col-2 (click)='selectDateTimeRoom(r.status[p.startHour], p.startHour, r.name)' class="timecell {{r.status[p.startHour]}}"></ion-col>
          <ion-col col-2 (click)='selectDateTimeRoom(r.status[p.startHour + 1], p.startHour + 1, r.name)' class="timecell {{r.status[p.startHour+1]}}"></ion-col>
          <ion-col col-2 (click)='selectDateTimeRoom(r.status[p.startHour + 2], p.startHour + 2, r.name)' class="timecell {{r.status[p.startHour+2]}}"></ion-col>
          <ion-col col-2 (click)='selectDateTimeRoom(r.status[p.startHour + 3], p.startHour + 3, r.name)' class="timecell {{r.status[p.startHour+3]}}"></ion-col>
        </ion-row>
      </ion-grid>
      <div style="height: 30px"></div>
    </ion-slide>

  </ion-slides>
</ion-list>

<ion-list>
  <ion-item>
    Time: {{selectedTime}} ~ {{selectedTime + 1}}
  </ion-item>
  <ion-item>
    Room: {{selectedRoom}}
  </ion-item>
  <button ion-button full (click)="confirmRoom()">Confirm</button>
</ion-list>

</ion-content>

<style>
  ion-list:first-child {
    margin-top: 32px;
  }
  ion-list + ion-list {
    margin-top: 0;
  }

  .timecell {
    border: 2px solid white;
  }

  ion-col.occ {
    background-color: red;
  }

  ion-col.ava {
    background-color: lawngreen;
  }

  ion-col.pub {
    background-color: #0ff;
  }
</style>
